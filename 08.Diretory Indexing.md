# 08. Directory Indexing (ë””ë ‰í† ë¦¬ ì¸ë±ì‹±)

## 1. ê°œìš” (Overview)
- **ì •ì˜**: ì›¹ ì„œë²„ì˜ íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì ‘ê·¼í–ˆì„ ë•Œ, ê¸°ë³¸ í˜ì´ì§€(index.html, index.jsp ë“±)ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° **ì„œë²„ê°€ í•´ë‹¹ ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ ëª©ë¡ì„ ìë™ìœ¼ë¡œ ë‚˜ì—´í•´ ë³´ì—¬ì£¼ëŠ” ì·¨ì•½ì **.
- **ë³„ì¹­**: Directory Listing (ë””ë ‰í† ë¦¬ ë¦¬ìŠ¤íŒ…)
- **ìœ„í—˜ë„**: **ì¤‘ (Medium)** / ì •ë³´ ë…¸ì¶œ (Information Leakage)
- **ì˜í–¥**:
    - ë°±ì—… íŒŒì¼(.bak, .zip), ì†ŒìŠ¤ì½”ë“œ, ì„¤ì • íŒŒì¼ ë…¸ì¶œ.
    - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë””ë ‰í† ë¦¬ êµ¬ì¡° íŒŒì•… ìš©ì´.
    - **2ì°¨ ê³µê²©ì˜ ì‹œë°œì ** (ë…¸ì¶œëœ ì†ŒìŠ¤ì½”ë“œë¥¼ ë¶„ì„í•´ SQL Injection ë“± ìˆ˜í–‰).

> **ğŸ’¡ í•µì‹¬ ì›ë¦¬**
> "ë³´ì—¬ì¤„ ëŒ€ë¬¸(index.html)ì´ ì—†ìœ¼ë©´, **ì°½ê³  ì•ˆ(íŒŒì¼ ëª©ë¡)ì„ ë‹¤ ë³´ì—¬ì¤˜ë¼**"ë¼ëŠ” ì„œë²„ì˜ ê¸°ë³¸ ì„¤ì •(Default) ë•Œë¬¸ì— ë°œìƒ.

---

## 2. ê³µê²© ë©”ì»¤ë‹ˆì¦˜ (Attack Vector)

### ì‹œë‚˜ë¦¬ì˜¤: ìë£Œì‹¤ íŒŒì¼ íƒˆì·¨
ì›¹ ì„œë²„ì— ìë£Œë¥¼ ì—…ë¡œë“œí•˜ëŠ” `/uploads/` í´ë”ê°€ ìˆë‹¤ê³  ê°€ì •.

**1. ì •ìƒ ì ‘ê·¼**
- URL: `http://site.com/uploads/image.png`
- ê²°ê³¼: ì´ë¯¸ì§€ íŒŒì¼ì´ ë³´ì„.

**2. ê³µê²© ì ‘ê·¼ (íŒŒì¼ëª… ì‚­ì œ)**
- URL: `http://site.com/uploads/`
- **ì·¨ì•½í•œ ê²½ìš°**: ë¸Œë¼ìš°ì €ì— **"Index of /uploads"** ë¼ëŠ” ì œëª©ê³¼ í•¨ê»˜ íŒŒì¼ ëª©ë¡ì´ ì«™ ëœ¸.
    - `secret_v1.zip`
    - `db_connect.inc`
    - `image.png`
- **ê³µê²©**: ê³µê²©ìëŠ” URL ì¶”ì¸¡ ì—†ì´ `secret_v1.zip`ì„ í´ë¦­í•´ì„œ ë‹¤ìš´ë¡œë“œí•¨.



---

## 3. ì·¨ì•½í•œ ì„¤ì • vs ì•ˆì „í•œ ì„¤ì • (Apache + Tomcat)

ì´ ì·¨ì•½ì ì€ **Java ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„œë²„ ì„¤ì • íŒŒì¼**ì„ ìˆ˜ì •í•´ì•¼ í•¨.

### â‘  Apache Web Server (httpd.conf)

**âŒ ì·¨ì•½í•œ ì„¤ì •**
> `Options Indexes`: ì¸ë±ì‹± ê¸°ëŠ¥ì„ **ì¼ ë‹¤**ëŠ” ì˜ë¯¸.

```apache
<Directory "/var/www/html">
    # Indexes ì˜µì…˜ì´ ìˆìœ¼ë©´ íŒŒì¼ ëª©ë¡ì„ ë³´ì—¬ì¤Œ (ìœ„í—˜)
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>
```
**âœ… ì•ˆì „í•œ ì„¤ì •**
> `Options -Indexes`: ì¸ë±ì‹± ê¸°ëŠ¥ì„ **ëˆë‹¤(Minus)**ëŠ” ì˜ë¯¸.
```apache
<Directory "/var/www/html">
    # ë§ˆì´ë„ˆìŠ¤(-)ë¥¼ ë¶™ì—¬ì„œ ì¸ë±ì‹± ë¹„í™œì„±í™” (í•„ìˆ˜)
    Options -Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>
```

### â‘¡ Tomcat WAS (web.xml)

Tomcatì€ ê¸°ë³¸ì ìœ¼ë¡œ ì´ ê¸°ëŠ¥ì´ êº¼ì ¸(false) ìˆì§€ë§Œ, ê°œë°œ í¸ì˜ë¥¼ ìœ„í•´ ì¼œë‘ëŠ” ê²½ìš°ê°€ ìˆìŒ.

**âŒ ì·¨ì•½í•œ ì„¤ì •**
>listings ê°’ì´ trueë¡œ ì„¤ì •ë¨.
```tomcat
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>0</param-value>
    </init-param>
    <init-param>
        <param-name>listings</param-name>
        <param-value>true</param-value> </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
```
**âœ… ì•ˆì „í•œ ì„¤ì •**
>listings ê°’ì„ falseë¡œ ë³€ê²½.
```tomcat
<init-param>
        <param-name>listings</param-name>
        <param-value>false</param-value> </init-param>
```

